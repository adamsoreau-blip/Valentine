<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tatiana, veux √™tre ma valentine ?</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap');

    :root{
      --bg1:#fff1f7;
      --bg2:#ffe3ef;
      --card:#ffffffcc;
      --text:#3f2a35;
      --rose:#ff5aa5;
      --rose2:#ff8bc4;
      --gold:#f7c7d9;
      --yes:#ff3f93;
      --no:#b7a3ae;
      --shadow: 0 18px 60px rgba(40, 10, 25, 0.12);
      --ring: 0 0 0 6px rgba(255, 90, 165, 0.18);
    }

    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
    }

    body{
      margin:0;
      height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family:'Lato',sans-serif;
      overflow:hidden;

      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,90,165,0.22), transparent 55%),
        radial-gradient(900px 700px at 90% 80%, rgba(255,139,196,0.18), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      color:var(--text);
    }

    /* Fond anim√© : petites bulles/coeurs doux */
    .ambient {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow:hidden;
    }
    .sparkle {
      position:absolute;
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0.2) 40%, rgba(255,90,165,0.18) 60%, transparent 70%);
      filter: blur(0.2px);
      opacity: 0.7;
      animation: floatUp linear infinite;
    }
    @keyframes floatUp{
      from { transform: translateY(110vh) translateX(0) scale(0.9); opacity:0; }
      10%  { opacity:0.8; }
      100%{ transform: translateY(-15vh) translateX(40px) scale(1.2); opacity:0; }
    }

    /* === Fond : c≈ìurs qui flottent (styl√© + l√©ger) === */
    .floating-hearts{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1; /* derri√®re la carte */
      overflow: hidden;
    }
    .fh{
      position: absolute;
      top: 110vh;
      opacity: 0;
      will-change: transform, opacity;
      filter: drop-shadow(0 8px 18px rgba(60,10,30,0.10));
      animation: fh-float linear infinite;
    }
    @keyframes fh-float{
      0%   { transform: translate3d(var(--x), 0, 0) rotate(0deg) scale(var(--s)); opacity: 0; }
      10%  { opacity: var(--o); }
      100% { transform: translate3d(calc(var(--x) + var(--drift)), -140vh, 0) rotate(var(--r)) scale(var(--s)); opacity: 0; }
    }
    @media (prefers-reduced-motion: reduce){
      .fh{ display:none !important; }
    }

    .container{
      width: min(420px, 92vw);
      padding: 2.6rem 2.2rem;
      border-radius: 26px;
      background: var(--card);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      position:relative;
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.55);

      /* Parallax premium */
      transform: translateZ(0);
      will-change: transform;
    }

    .container::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius: 28px;
      padding:2px;
      background: linear-gradient(135deg, rgba(255,90,165,0.55), rgba(255,255,255,0.35), rgba(255,139,196,0.45));
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
      opacity:0.9;
    }

    h1{
      font-family:'Playfair Display',serif;
      font-size: 2rem;
      line-height:1.25;
      margin: 0 0 1.8rem;
      letter-spacing: 0.2px;
      animation: titlePop 700ms cubic-bezier(.2,.9,.2,1) both;
    }
    @keyframes titlePop{
      from { opacity:0; transform: translateY(10px) scale(0.98); }
      to   { opacity:1; transform: translateY(0) scale(1); }
    }

    .subtitle{
      margin-top:-1.1rem;
      margin-bottom: 2rem;
      font-size: 0.95rem;
      opacity:0.8;
    }

    .buttons{
      display:flex;
      justify-content:center;
      gap: 16px;
      min-height: 64px;
      position:relative;
    }

    button{
      padding: 12px 28px;
      border:none;
      border-radius: 999px;
      cursor:pointer;
      font-size: 1.08rem;
      font-family:'Playfair Display',serif;
      font-style: italic;
      transition: transform 180ms ease, box-shadow 180ms ease, filter 180ms ease;
      user-select:none;
      outline:none;

      /* √©vite les interactions bizarres mobile */
      touch-action: manipulation;
    }

    button:focus-visible{
      box-shadow: var(--ring), 0 8px 22px rgba(20,10,15,0.12);
    }

    #btn-yes{
      background: linear-gradient(135deg, var(--yes), var(--rose2));
      color:#fff;
      box-shadow: 0 10px 26px rgba(255, 63, 147, 0.28);

      position: relative;
      overflow: hidden;
    }
    #btn-yes:hover{ transform: translateY(-2px) scale(1.03); filter: brightness(1.03); }

    /* Glint (brillance) sur Oui */
    #btn-yes::after{
      content:"";
      position:absolute;
      inset:-40%;
      background: linear-gradient(120deg, transparent 35%, rgba(255,255,255,0.55) 50%, transparent 65%);
      transform: translateX(-60%) rotate(10deg);
      opacity: 0.0;
      transition: opacity 180ms ease;
    }
    #btn-yes:hover::after{
      opacity: 0.9;
      animation: glint 900ms ease forwards;
    }
    @keyframes glint{
      to { transform: translateX(60%) rotate(10deg); opacity: 0; }
    }

    #btn-no{
      background: linear-gradient(135deg, var(--no), #d8cbd2);
      color:#fff;
      box-shadow: 0 10px 22px rgba(80, 50, 65, 0.18);
      position: relative;
      z-index: 100;
    }
    #btn-no:hover{ transform: translateY(-2px) scale(1.02); filter: brightness(1.02); }

    #success-message{
      display:none;
      margin-top: 18px;
      animation: fadeIn 450ms ease both;
      position:relative;
    }
    #success-message p{
      font-size: 1.18rem;
      color: var(--rose);
      font-family:'Playfair Display',serif;
      margin:0.6rem 0 0;
    }
    #success-message small{
      display:block;
      margin-top: 8px;
      color: rgba(63,42,53,0.7);
      font-family:'Lato',sans-serif;
      font-style: normal;
    }

    @keyframes fadeIn{
      from { opacity:0; transform: translateY(10px); }
      to   { opacity:1; transform: translateY(0); }
    }

    /* Confettis coeurs */
    .heart{
      position: fixed;
      top: -40px;
      z-index: 999;
      will-change: transform, opacity;
      filter: drop-shadow(0 6px 10px rgba(60,10,30,0.12));
      animation: fall 2800ms ease-in forwards;
      pointer-events:none;
    }
    @keyframes fall{
      to { transform: translateY(120vh) rotate(18deg); opacity:0; }
    }

    @media (max-width: 500px){
      .container{ padding: 2rem 1.5rem; }
      h1{ font-size: 1.55rem; }
      button{ padding: 10px 20px; font-size: 1rem; }
    }
  </style>
</head>

<body>
  <!-- fond anim√© -->
  <div class="ambient" id="ambient"></div>

  <!-- c≈ìurs flottants en fond -->
  <div class="floating-hearts" id="floating-hearts"></div>

  <div class="container">
    <h1 id="main-text">Tatiana, tu veux √™tre ma valentine ?</h1>
    <div class="subtitle">Alors ? Styl√© ? par contre je rigole hyn, ou pas....</div>

    <div class="buttons">
      <button id="btn-yes">Oui ü•∞</button>
      <button id="btn-no">Non üòµ</button>
    </div>

    <div id="success-message">
      <p>Rose envoy√© ! üåπ</p>
      <small>(Bah wsh ? depuis quand ???)</small>
    </div>
  </div>

  <script>
    const btnNo = document.getElementById('btn-no');
    const btnYes = document.getElementById('btn-yes');
    const mainText = document.getElementById('main-text');
    const successMessage = document.getElementById('success-message');
    const ambient = document.getElementById('ambient');
    const floating = document.getElementById('floating-hearts');

    // Reduced motion
    const reduceMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // === Sons (WebAudio, sans fichiers externes) ===
    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    const audioCtx = AudioCtx ? new AudioCtx() : null;

    function beep({ type='sine', freq=440, dur=0.08, gain=0.04, ramp=0.02 } = {}) {
      if (!audioCtx) return;
      const now = audioCtx.currentTime;
      const osc = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      osc.type = type;
      osc.frequency.setValueAtTime(freq, now);

      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(gain, now + ramp);
      g.gain.exponentialRampToValueAtTime(0.0001, now + dur);

      osc.connect(g).connect(audioCtx.destination);
      osc.start(now);
      osc.stop(now + dur + 0.01);
    }

    function whoosh() {
      beep({ type:'triangle', freq:620, dur:0.06, gain:0.03 });
      setTimeout(() => beep({ type:'triangle', freq:420, dur:0.07, gain:0.028 }), 40);
      setTimeout(() => beep({ type:'triangle', freq:260, dur:0.08, gain:0.025 }), 90);
    }

    function yay() {
      beep({ type:'sine', freq:523.25, dur:0.09, gain:0.045 }); // C5
      setTimeout(() => beep({ type:'sine', freq:659.25, dur:0.10, gain:0.045 }), 95); // E5
      setTimeout(() => beep({ type:'sine', freq:783.99, dur:0.12, gain:0.05 }), 200); // G5
    }

    // R√©veille l‚Äôaudio au premier geste utilisateur
    function unlockAudio() {
      if (!audioCtx) return;
      if (audioCtx.state === 'suspended') audioCtx.resume();
      window.removeEventListener('pointerdown', unlockAudio);
      window.removeEventListener('touchstart', unlockAudio);
    }
    window.addEventListener('pointerdown', unlockAudio, { once:true });
    window.addEventListener('touchstart', unlockAudio, { once:true });

    // === Fond anim√© : bulles paillet√©es ===
    function spawnAmbient(count = 18) {
      for (let i = 0; i < count; i++) {
        const s = document.createElement('div');
        s.className = 'sparkle';
        const size = Math.random() * 10 + 6;
        s.style.width = size + 'px';
        s.style.height = size + 'px';
        s.style.left = (Math.random() * 100) + 'vw';
        s.style.animationDuration = (Math.random() * 6 + 6) + 's';
        s.style.animationDelay = (Math.random() * 6) + 's';
        s.style.opacity = (Math.random() * 0.45 + 0.25);
        ambient.appendChild(s);
      }
    }
    spawnAmbient();

    // === C≈ìurs en fond (fluide + l√©ger) ===
    function spawnFloatingHeart() {
      if (!floating || reduceMotion) return;

      const el = document.createElement('div');
      el.className = 'fh';

      const emojis = ['‚ù§','üíñ','üíó','üíï','üíû','‚ú®'];
      el.textContent = emojis[Math.floor(Math.random() * emojis.length)];

      const x = Math.random() * 100;                 // vw
      const s = Math.random() * 0.9 + 0.55;          // scale
      const o = Math.random() * 0.35 + 0.15;         // opacity
      const drift = (Math.random() * 120 - 60) + 'px';
      const r = (Math.random() * 40 - 20) + 'deg';
      const dur = (Math.random() * 7 + 8);           // 8-15s
      const size = (Math.random() * 18 + 12) + 'px';

      el.style.left = x + 'vw';
      el.style.fontSize = size;

      el.style.setProperty('--x', '0px');
      el.style.setProperty('--drift', drift);
      el.style.setProperty('--s', s);
      el.style.setProperty('--o', o);
      el.style.setProperty('--r', r);
      el.style.animationDuration = dur + 's';

      floating.appendChild(el);
      setTimeout(() => el.remove(), (dur * 1000) + 500);
    }

    if (!reduceMotion) {
      setInterval(spawnFloatingHeart, 420);
      for (let i = 0; i < 10; i++) setTimeout(spawnFloatingHeart, i * 140);
    }

    // === Bouton NON qui s‚Äô√©chappe (mais sans sortir de l‚Äô√©cran) ===
    function moveButton() {
      const rectBtn = btnNo.getBoundingClientRect();
      const btnWidth = rectBtn.width || btnNo.offsetWidth;
      const btnHeight = rectBtn.height || btnNo.offsetHeight;

      const margin = 18;
      const vv = window.visualViewport;

      const viewLeft = vv ? vv.offsetLeft : 0;
      const viewTop  = vv ? vv.offsetTop  : 0;
      const viewW    = vv ? vv.width      : window.innerWidth;
      const viewH    = vv ? vv.height     : window.innerHeight;

      const minX = viewLeft + margin;
      const minY = viewTop + margin;
      const maxX = viewLeft + viewW - btnWidth - margin;
      const maxY = viewTop + viewH - btnHeight - margin;

      const safeMaxX = Math.max(minX, maxX);
      const safeMaxY = Math.max(minY, maxY);

      let x = minX + Math.random() * (safeMaxX - minX);
      let y = minY + Math.random() * (safeMaxY - minY);

      btnNo.style.position = 'fixed';
      btnNo.style.left = `${x}px`;
      btnNo.style.top = `${y}px`;

      requestAnimationFrame(() => {
        const r = btnNo.getBoundingClientRect();

        let dx = 0, dy = 0;

        const leftBound   = viewLeft + margin;
        const topBound    = viewTop + margin;
        const rightBound  = viewLeft + viewW - margin;
        const bottomBound = viewTop + viewH - margin;

        if (r.left < leftBound) dx = leftBound - r.left;
        if (r.top < topBound) dy = topBound - r.top;
        if (r.right > rightBound) dx = rightBound - r.right;
        if (r.bottom > bottomBound) dy = bottomBound - r.bottom;

        if (dx || dy) {
          const curLeft = parseFloat(btnNo.style.left) || 0;
          const curTop = parseFloat(btnNo.style.top) || 0;
          btnNo.style.left = `${curLeft + dx}px`;
          btnNo.style.top = `${curTop + dy}px`;
        }
      });

      if (navigator.vibrate) navigator.vibrate(25);
      if (typeof whoosh === "function") whoosh();
    }

    btnNo.addEventListener('mouseover', moveButton);
    btnNo.addEventListener('touchstart', (e) => {
      e.preventDefault();
      moveButton();
    }, { passive:false });

    btnNo.addEventListener('click', (e) => {
      e.preventDefault();
      moveButton();
    });

    // === OUI ===
    btnYes.addEventListener('click', () => {
      btnYes.style.display = 'none';
      btnNo.style.display = 'none';

      mainText.innerHTML = "Imbecile üëÄ";
      successMessage.style.display = 'block';

      yay();
      createHearts(28);
    });

    // === Pluie de coeurs ===
    function createHearts(n = 20) {
      const emojis = ['‚ù§Ô∏è','üíñ','üíó','üíï','üíû','‚ú®'];

      for (let i = 0; i < n; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = emojis[Math.floor(Math.random() * emojis.length)];

        const left = Math.random() * 100;
        const size = Math.random() * 20 + 14;
        const drift = (Math.random() * 120 - 60);

        heart.style.left = left + 'vw';
        heart.style.fontSize = size + 'px';
        heart.style.opacity = (Math.random() * 0.6 + 0.35);
        heart.style.transform = `translateX(${drift}px) rotate(${Math.random()*20-10}deg)`;

        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 3200);
      }
    }

    // === Parallax doux sur la carte (premium) ===
    const card = document.querySelector('.container');
    let rafId = null;

    function onMove(e){
      if (!card || reduceMotion) return;

      const x = (e.clientX / window.innerWidth) - 0.5;
      const y = (e.clientY / window.innerHeight) - 0.5;

      if (rafId) cancelAnimationFrame(rafId);
      rafId = requestAnimationFrame(() => {
        card.style.transform =
          `rotateX(${(-y*4).toFixed(2)}deg) rotateY(${(x*6).toFixed(2)}deg) translateY(-1px)`;
      });
    }

    function resetCard(){
      if (!card) return;
      card.style.transform = 'rotateX(0deg) rotateY(0deg)';
    }

    window.addEventListener('pointermove', onMove);
    window.addEventListener('pointerleave', resetCard);
    window.addEventListener('blur', resetCard);
  </script>
</body>
</html>
